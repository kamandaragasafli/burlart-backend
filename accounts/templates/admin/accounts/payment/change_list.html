{% extends "admin/change_list.html" %}
{% load humanize %}

{% block content_title %}
    <h1>Payments - Financial Reporting</h1>
{% endblock %}

{% block result_list %}
    {% if financial_summary %}
    <div style="background: #f8f9fa; padding: 20px; margin-bottom: 20px; border-radius: 8px;">
        <h2 style="margin-top: 0;">Financial Summary (Completed Payments Only)</h2>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 15px;">
            <div style="background: white; padding: 15px; border-radius: 6px; border-left: 4px solid #4dabf7;">
                <div style="font-size: 12px; color: #868e96; text-transform: uppercase; margin-bottom: 5px;">Total Revenue</div>
                <div style="font-size: 24px; font-weight: bold; color: #212529;">₼{{ financial_summary.total_revenue|floatformat:2|intcomma }}</div>
            </div>
            <div style="background: white; padding: 15px; border-radius: 6px; border-left: 4px solid #ff6b6b;">
                <div style="font-size: 12px; color: #868e96; text-transform: uppercase; margin-bottom: 5px;">Total Commission (3%)</div>
                <div style="font-size: 24px; font-weight: bold; color: #212529;">₼{{ financial_summary.total_commission|floatformat:2|intcomma }}</div>
            </div>
            <div style="background: white; padding: 15px; border-radius: 6px; border-left: 4px solid #ffa500;">
                <div style="font-size: 12px; color: #868e96; text-transform: uppercase; margin-bottom: 5px;">Total Tax (4%)</div>
                <div style="font-size: 24px; font-weight: bold; color: #212529;">₼{{ financial_summary.total_tax|floatformat:2|intcomma }}</div>
            </div>
            <div style="background: white; padding: 15px; border-radius: 6px; border-left: 4px solid #51cf66;">
                <div style="font-size: 12px; color: #868e96; text-transform: uppercase; margin-bottom: 5px;">Net Amount</div>
                <div style="font-size: 24px; font-weight: bold; color: #212529;">₼{{ financial_summary.total_net|floatformat:2|intcomma }}</div>
            </div>
        </div>
        <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #dee2e6;">
            <div style="display: flex; gap: 30px;">
                <div>
                    <strong>Total Payments:</strong> {{ financial_summary.payment_counts.total }}
                </div>
                <div>
                    <strong>Subscriptions:</strong> {{ financial_summary.payment_counts.subscriptions }}
                </div>
                <div>
                    <strong>Top-ups:</strong> {{ financial_summary.payment_counts.topups }}
                </div>
            </div>
        </div>
    </div>
    {% endif %}
    {{ block.super }}
{% endblock %}

